import{r as i,R as e,H as D,a as q,b as F,M as A}from"./index-BNAqKgH5.js";import{M as K,r as V}from"./index-B9UOTPPW.js";const j=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:"w-4 h-4"},e.createElement("path",{d:"M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"}),e.createElement("path",{d:"M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"})),O=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("line",{x1:"19",y1:"4",x2:"10",y2:"4"}),e.createElement("line",{x1:"14",y1:"20",x2:"5",y2:"20"}),e.createElement("line",{x1:"15",y1:"4",x2:"9",y2:"20"})),$=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("path",{d:"M17.3 4.9c-2.3-.6-4.4-1-6.2-.9-2.7 0-5.3.7-5.3 3.6 0 1.5 1.1 2.6 3.1 3.4"}),e.createElement("path",{d:"M4 12h16"}),e.createElement("path",{d:"M17.5 12c1.5.5 2.5 1.3 2.5 2.8 0 3.4-3.7 4.2-6.1 4.2-2.7 0-4.3-.5-6.9-1.5"})),R=({level:n})=>e.createElement("span",{className:"font-bold text-xs"},"H",n),G=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("line",{x1:"9",y1:"6",x2:"20",y2:"6"}),e.createElement("line",{x1:"9",y1:"12",x2:"20",y2:"12"}),e.createElement("line",{x1:"9",y1:"18",x2:"20",y2:"18"}),e.createElement("circle",{cx:"4",cy:"6",r:"1.5",fill:"currentColor"}),e.createElement("circle",{cx:"4",cy:"12",r:"1.5",fill:"currentColor"}),e.createElement("circle",{cx:"4",cy:"18",r:"1.5",fill:"currentColor"})),Q=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("line",{x1:"10",y1:"6",x2:"20",y2:"6"}),e.createElement("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),e.createElement("line",{x1:"10",y1:"18",x2:"20",y2:"18"}),e.createElement("text",{x:"3",y:"8",fontSize:"7",fill:"currentColor",stroke:"none",fontWeight:"bold"},"1"),e.createElement("text",{x:"3",y:"14",fontSize:"7",fill:"currentColor",stroke:"none",fontWeight:"bold"},"2"),e.createElement("text",{x:"3",y:"20",fontSize:"7",fill:"currentColor",stroke:"none",fontWeight:"bold"},"3")),J=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.createElement("path",{d:"M9 12l2 2 4-4"})),U=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("polyline",{points:"16 18 22 12 16 6"}),e.createElement("polyline",{points:"8 6 2 12 8 18"})),X=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),e.createElement("polyline",{points:"8 10 6 12 8 14"}),e.createElement("polyline",{points:"16 10 18 12 16 14"}),e.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"16"})),Y=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V21z"}),e.createElement("path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v4z"})),Z=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),e.createElement("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})),_=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.createElement("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.createElement("path",{d:"M21 15l-5-5L5 21"})),ee=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("line",{x1:"3",y1:"12",x2:"21",y2:"12"})),te=()=>e.createElement("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4"},e.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e.createElement("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),e.createElement("line",{x1:"3",y1:"15",x2:"21",y2:"15"}),e.createElement("line",{x1:"9",y1:"3",x2:"9",y2:"21"}),e.createElement("line",{x1:"15",y1:"3",x2:"15",y2:"21"}));function s({onClick:n,title:l,children:u,active:h=!1}){return e.createElement("button",{type:"button",onClick:n,title:l,className:`p-1.5 rounded transition-all duration-150 ${h?"bg-green-600/20 text-green-400":"text-gray-500 hover:text-white hover:bg-[#1a1a1a]"}`},u)}function S(){return e.createElement("div",{className:"w-px h-5 bg-[#1a1a1a] mx-1"})}function ne({value:n,onChange:l,placeholder:u="Write your content using Markdown...",minHeight:h="256px",showPreview:f=!0}){const d=i.useRef(null),[E,C]=i.useState("edit");i.useEffect(()=>{E==="edit"&&d.current&&d.current.focus()},[E]);const a=i.useCallback((t,r="",c="",m={})=>{const x=d.current;if(!x)return;const{selectionStart:o,selectionEnd:g}=x,k=n.substring(o,g),p=n.substring(0,o),L=n.substring(g);let B,N;if(m.linePrefix){const y=n.split(`
`);let W=0,T=0;for(let w=0;w<y.length;w++){if(W+y[w].length>=o){T=w;break}W+=y[w].length+1}const H=y[T];if(m.toggle&&H.startsWith(t))y[T]=H.substring(t.length);else{let w=H.replace(/^#{1,6}\s*/,"").replace(/^[-*+]\s*(\[ \]\s*)?/,"").replace(/^\d+\.\s*/,"").replace(/^>\s*/,"");y[T]=t+w}B=y.join(`
`),N=W+y[T].length}else k?(B=p+t+k+r+L,N=o+t.length+k.length+r.length):(B=p+t+c+r+L,N=o+t.length);l(B),requestAnimationFrame(()=>{x.focus(),k||m.linePrefix?x.setSelectionRange(N,N):x.setSelectionRange(o+t.length,o+t.length+c.length)})},[n,l]),I=i.useCallback(()=>{const t=d.current;if(!t)return;const{selectionStart:r,selectionEnd:c}=t,m=n.substring(r,c),x=n.substring(0,r),o=n.substring(c),g=m||"code here",k=x+"\n```\n"+g+"\n```\n"+o;l(k),requestAnimationFrame(()=>{t.focus();const p=r+5;t.setSelectionRange(p,p+g.length)})},[n,l]),b=i.useCallback(()=>{const t=d.current;if(!t)return;const{selectionStart:r}=t,c=n.substring(0,r),m=n.substring(r);l(c+`
| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| Cell 1   | Cell 2   | Cell 3   |
| Cell 4   | Cell 5   | Cell 6   |
`+m),requestAnimationFrame(()=>{t.focus()})},[n,l]),v=i.useCallback(()=>{const t=d.current;if(!t)return;const{selectionStart:r,selectionEnd:c}=t,m=n.substring(r,c),x=n.substring(0,r),o=n.substring(c),g=m||"link text",k=x+"["+g+"](url)"+o;l(k),requestAnimationFrame(()=>{t.focus();const p=r+g.length+3;t.setSelectionRange(p,p+3)})},[n,l]),M=i.useCallback(()=>{const t=d.current;if(!t)return;const{selectionStart:r}=t,c=n.substring(0,r),m=n.substring(r),x=c+"![alt text](image-url)"+m;l(x),requestAnimationFrame(()=>{t.focus();const o=r+12;t.setSelectionRange(o,o+9)})},[n,l]),P=i.useCallback(()=>{const t=d.current;if(!t)return;const{selectionStart:r}=t,c=n.substring(0,r),m=n.substring(r);l(c+`
---
`+m),requestAnimationFrame(()=>{t.focus()})},[n,l]),z=i.useCallback(t=>{if(t.ctrlKey||t.metaKey)switch(t.key.toLowerCase()){case"b":t.preventDefault(),a("**","**","bold text");break;case"i":t.preventDefault(),a("*","*","italic text");break;case"k":t.preventDefault(),v();break;case"`":t.preventDefault(),a("`","`","code");break}if(t.key==="Tab"){t.preventDefault();const r=d.current,{selectionStart:c,selectionEnd:m}=r,x=n.substring(0,c),o=n.substring(m),g=x+"  "+o;l(g),requestAnimationFrame(()=>{r.focus(),r.setSelectionRange(c+2,c+2)})}},[a,v,n,l]);return e.createElement("div",{className:"markdown-editor"},f&&e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:"flex items-center gap-1 bg-[#0a0a0a] border border-[#1a1a1a] rounded p-0.5"},e.createElement("button",{type:"button",onClick:()=>C("edit"),className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition-colors ${E==="edit"?"bg-[#1a1a1a] text-white":"text-gray-500 hover:text-gray-300"}`},e.createElement(D,{className:"w-3 h-3"}),"Edit"),e.createElement("button",{type:"button",onClick:()=>C("preview"),className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition-colors ${E==="preview"?"bg-[#1a1a1a] text-white":"text-gray-500 hover:text-gray-300"}`},e.createElement(q,{className:"w-3 h-3"}),"Preview"))),E==="edit"?e.createElement(e.Fragment,null,e.createElement("div",{className:"flex flex-wrap items-center gap-0.5 p-2 bg-[#0a0a0a] border border-[#1a1a1a] border-b-0 rounded-t"},e.createElement(s,{onClick:()=>a("**","**","bold text"),title:"Bold (Ctrl+B)"},e.createElement(j,null)),e.createElement(s,{onClick:()=>a("*","*","italic text"),title:"Italic (Ctrl+I)"},e.createElement(O,null)),e.createElement(s,{onClick:()=>a("~~","~~","strikethrough"),title:"Strikethrough"},e.createElement($,null)),e.createElement(S,null),e.createElement(s,{onClick:()=>a("# ","","",{linePrefix:!0,toggle:!0}),title:"Heading 1"},e.createElement(R,{level:1})),e.createElement(s,{onClick:()=>a("## ","","",{linePrefix:!0,toggle:!0}),title:"Heading 2"},e.createElement(R,{level:2})),e.createElement(s,{onClick:()=>a("### ","","",{linePrefix:!0,toggle:!0}),title:"Heading 3"},e.createElement(R,{level:3})),e.createElement(S,null),e.createElement(s,{onClick:()=>a("- ","","",{linePrefix:!0,toggle:!0}),title:"Bullet List"},e.createElement(G,null)),e.createElement(s,{onClick:()=>a("1. ","","",{linePrefix:!0,toggle:!0}),title:"Numbered List"},e.createElement(Q,null)),e.createElement(s,{onClick:()=>a("- [ ] ","","",{linePrefix:!0,toggle:!0}),title:"Checkbox List"},e.createElement(J,null)),e.createElement(S,null),e.createElement(s,{onClick:()=>a("`","`","code"),title:"Inline Code (Ctrl+`)"},e.createElement(U,null)),e.createElement(s,{onClick:I,title:"Code Block"},e.createElement(X,null)),e.createElement(S,null),e.createElement(s,{onClick:()=>a("> ","","",{linePrefix:!0,toggle:!0}),title:"Blockquote"},e.createElement(Y,null)),e.createElement(s,{onClick:v,title:"Link (Ctrl+K)"},e.createElement(Z,null)),e.createElement(s,{onClick:M,title:"Image"},e.createElement(_,null)),e.createElement(S,null),e.createElement(s,{onClick:b,title:"Table"},e.createElement(te,null)),e.createElement(s,{onClick:P,title:"Horizontal Rule"},e.createElement(ee,null))),e.createElement("textarea",{ref:d,value:n,onChange:t=>l(t.target.value),onKeyDown:z,placeholder:u,className:"w-full bg-black border border-[#1a1a1a] rounded-b px-3 py-2 text-sm text-gray-200 placeholder-gray-700 outline-none focus:border-[#2a2a2a] resize-none custom-scrollbar font-mono",style:{minHeight:h}}),e.createElement("p",{className:"text-[10px] text-gray-600 mt-1.5 flex items-center gap-2"},e.createElement("span",null,"Supports full Markdown: headings, formatting, lists, code, tables, and more."),e.createElement("span",{className:"text-gray-700"},"•"),e.createElement("span",null,"Ctrl+B Bold • Ctrl+I Italic • Ctrl+K Link"))):e.createElement("div",{className:"bg-black border border-[#1a1a1a] rounded px-4 py-3 overflow-y-auto custom-scrollbar",style:{minHeight:h}},n?e.createElement("div",{className:"prose-terminal text-sm"},e.createElement(K,{remarkPlugins:[V]},n)):e.createElement("p",{className:"text-gray-600 text-sm italic flex items-center gap-2"},e.createElement(F,{className:"w-4 h-4"}),"No content yet. Switch to Edit mode to start writing.")))}function ce({isOpen:n,onClose:l,item:u,onSave:h}){const[f,d]=i.useState(""),[E,C]=i.useState(""),[a,I]=i.useState(!1),b=i.useRef(null);i.useEffect(()=>{u&&(d(u.title||""),C(u.description||""))},[u?.id]),i.useEffect(()=>{if(u&&(b.current&&clearTimeout(b.current),E!==(u.description||"")))return I(!0),b.current=setTimeout(()=>{f.trim()&&(h({...u,title:f.trim(),description:E}),I(!1))},1e3),()=>{b.current&&clearTimeout(b.current)}},[E,f,u,h]);const v=()=>{f.trim()&&(b.current&&clearTimeout(b.current),h({...u,title:f.trim(),description:E}),l())};return u?e.createElement(A,{isOpen:n,onClose:l,title:"Edit Item",size:"lg"},e.createElement("div",{className:"space-y-4"},a&&e.createElement("div",{className:"flex items-center gap-2 text-xs text-green-400"},e.createElement("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Saving..."),e.createElement("div",null,e.createElement("label",{className:"block text-xs text-gray-500 uppercase tracking-wide mb-1.5"},"Title"),e.createElement("input",{type:"text",value:f,onChange:M=>d(M.target.value),placeholder:"Item title...",className:"w-full bg-black border border-[#1a1a1a] rounded px-3 py-2 text-sm text-white placeholder-gray-600 outline-none focus:border-[#2a2a2a]"})),e.createElement("div",null,e.createElement("label",{className:"block text-xs text-gray-500 uppercase tracking-wide mb-1.5"},"Description"),e.createElement(ne,{value:E,onChange:C,placeholder:"Write your description using Markdown...",minHeight:"256px"})),e.createElement("div",{className:"flex justify-end gap-2 pt-2 border-t border-[#1a1a1a]"},e.createElement("button",{onClick:l,className:"px-4 py-2 text-xs text-gray-400 hover:text-white transition-colors"},"Close"),e.createElement("button",{onClick:v,disabled:!f.trim(),className:"px-4 py-2 text-xs bg-green-600 text-black font-medium rounded hover:bg-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},"Save & Close")))):null}export{ce as default};
